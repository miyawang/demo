<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>

<body>
  <script>
    // 问题：菲波那契数列存在大量重复计算的问题
    var count = 0

    function fib(num) {
      count++
      if (num === 0 || num === 1) {
        return 1
      }
      return fib(num - 1) + fib(num - 2)
    }
    fib(10)
    console.log(count)

    // 计算索引号为：5 的值，代码执行了： 15次
    // 计算索引号为：6 的值，代码执行了： 25次
    // 计算索引号为：7 的值，代码执行了： 41次
    // ....
    // 计算索引号为：10 的值，代码执行了： 177次
    // 计算索引号为：11 的值，代码执行了： 287次
    // ...
    // 计算索引号为：20 的值，代码执行了： 21891次
    // 计算索引号为：21 的值，代码执行了： 35421次
    // ...
    // 计算索引号为：40 的值，代码执行了： 331160281次
    
    // 通过分析发现：递归中存在大量重复计算的问题
    // 应该是：每个值只计算一次，如果计算过了，下一次不应该在计算了
    // 如何实现计算过了就直接使用而不是再次计算呢？？？
    // 解决：缓存，来解决
    // 
    // 什么是缓存（cache）？？？存储数据的一个空间
    // 在JS中，通过对象（{}）来充当缓存。我们可以通过键来存储数据，将来也可以通过这个键
    // 来从缓存中取出对应的数据。这样，一个缓存对象中就可以存储很多数据了
    // 
    // 有了缓存后，如何使用？？？
    // 1 先判断缓存中有没有我们需要的数据
    // 2 如果有，就直接取出来使用
    // 3 如果没有，就先计算，然后将计算的结果存储到缓存中
    // 4 这样，下一次，再从缓存中取数据就有了~
    // 
    // 注意：我们使用缓存后，就完全信任缓存中的数据。因此，缓存中的数据，不应该让任何人获取到，所以，缓存对象应该使用闭包来保护起来！！！

  </script>
</body>

</html>