<!DOCTYPE html>
<html lang="zh-Hans">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <style>
    fieldset,
    img,
    input,
    button {
      border: none;
      padding: 0;
      margin: 0;
      outline-style: none;
    }

    ul,
    ol {
      list-style: none;
      margin: 0px;
      padding: 0px;
    }

    #box {
      width: 405px;
      margin: 200px auto;
      position: relative;
    }

    #txtSearch {
      float: left;
      width: 300px;
      height: 32px;
      padding-left: 4px;
      border: 1px solid #b6b6b6;
      border-right: 0;
    }

    #btnSearch {
      float: left;
      width: 100px;
      height: 34px;
      font: 400 14px/34px "microsoft yahei";
      color: white;
      background: #3385ff;
      cursor: pointer;
    }

    #btnSearch:hover {
      background: #317ef3;
    }

    #pop {
      width: 303px;
      border: 1px solid #ccc;
      padding: 0px;
      position: absolute;
      top: 34px;
    }

    #pop ul li {
      padding-left: 5px;
    }

    #pop ul li:hover {
      background-color: #CCC;
    }
  </style>
</head>

<body>
  <div id="box">
    <input type="text" id="txtSearch">
    <input type="button" value="百度一下" id="btnSearch">
    <div id="pop">
      <!-- <ul>
    <li>凤姐</li>
    <li>芙蓉</li>
    <li>西施</li>
    <li>貂蝉</li>
    </ul> -->
    </div>
  </div>

  <script>
    var datas = ["a", "abc", "abbbb", "abxxxx", "xyz", "abcdef", "abzzzz", "axxx", "aaabbb"];
    // 1.找对象
    var search = document.getElementById('txtSearch');
    var box = document.getElementById('box');


    // 2.给文本框注册键盘谈起事件
    search.onkeyup = function () {
      var arrNew = [];
      // console.log(this.value);
      // 判断数组里面的哪些字符串是包含了this.value 存到新的数组里面去
      for (var i = 0; i < datas.length; i++) {
        //判断datas[i]是否包含了this.value 
        if (datas[i].indexOf(this.value) != -1) {
          //=-1说明不包含 ！=-1 说明包含
          // 3 获取到文本的值，通过ajax给后台，后台返回一个数组，数组中装了需要显示的内容
          arrNew.push(datas[i]);
        }
      }
      // 有个bug 在创建pop时 保证只有一个pop 之前创建的先删掉 再创建
      var pop = document.getElementById('pop');
      if (pop) {
        //说明pop存在
        box.removeChild(pop);
      }
      console.log(arrNew);
      if (arrNew.length == 0 || this.value.length == 0) {
        return;
      }
      // 4.根据需要显示的内容 动态的创建元素
      // 点击的时候就要生成元素 所以 要在函数里面写
      // 创建div 添加到box中 设置div的内容
      var div = document.createElement('div');
      box.appendChild(div);
      div.id = 'pop';
      // 5.创建ul 添加到div中 给ul设置内容
      var ul = document.createElement('ul');
      div.appendChild(ul);
      // 6.创建li 添加到ul中 给li设置内容
      for (var i = 0; i < arrNew.length; i++) {
        var li = document.createElement('li');
        ul.appendChild(li);
        li.innerHTML = arrNew[i];
      }
    }
  </script>

</body>

</html>